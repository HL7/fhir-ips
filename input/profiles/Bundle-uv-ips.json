{
  "resourceType": "StructureDefinition",
  "id": "Bundle-uv-ips",
  "url": "http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips",
  "name": "BundleUvIps",
  "title": "Bundle - IPS",
  "status": "active",
  "description": "This profile represents the constraints applied to the Bundle resource by the International Patient Summary (IPS) FHIR Implementation Guide.",
  "purpose": "An International Patient Summary (IPS) bundle is an electronic health record extract containing essential healthcare information about a subject of care, comprising at least the required elements of the IPS dataset. The IPS dataset is minimal and non-exhaustive; specialty-agnostic and condition-independent; but still clinically relevant. As specified in EN 17269 and ISO/DIS 27269, it is designed for supporting the use case scenario for ‘unplanned, cross border care’, but it is not limited to it. It is intended to be international, i.e., to provide generic solutions for global application beyond a particular region or country.",
  "kind": "resource",
  "abstract": false,
  "type": "Bundle",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Bundle",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Bundle",
        "path": "Bundle",
        "short": "International Patient Summary Bundle",
        "definition": "International Patient Summary Bundle. \r\nA container for a collection of resources in the patient summary document.",
        "constraint": [
          {
            "key": "bdl-ips-1",
            "severity": "error",
            "human": "An IPS document must have no additional Composition (including Composition subclass) resources besides the first",
            "expression": "entry.tail().where(resource is Composition).empty()",
            "source": "http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips"
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Bundle.identifier",
        "path": "Bundle.identifier",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Bundle.type",
        "path": "Bundle.type",
        "fixedCode": "document"
      },
      {
        "id": "Bundle.timestamp",
        "path": "Bundle.timestamp",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Bundle.link",
        "path": "Bundle.link",
        "max": "0"
      },
      {
        "id": "Bundle.entry",
        "path": "Bundle.entry",
        "slicing": {
          "discriminator": [
            {
              "type": "type",
              "path": "resource"
            }
          ],
          "rules": "open"
        },
        "short": "Entry resource in the patient summary bundle",
        "definition": "An entry resource included in the patient summary document bundle resource.",
        "comment": "Must contain the IPS Composition as the first entry (only a single Composition resource instance may be included).  Additional constraints are specified in the IPS Composition profile.",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Bundle.entry.fullUrl",
        "path": "Bundle.entry.fullUrl",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Bundle.entry.search",
        "path": "Bundle.entry.search",
        "max": "0"
      },
      {
        "id": "Bundle.entry.request",
        "path": "Bundle.entry.request",
        "max": "0"
      },
      {
        "id": "Bundle.entry.response",
        "path": "Bundle.entry.response",
        "max": "0"
      },
      {
        "id": "Bundle.entry:composition",
        "path": "Bundle.entry",
        "sliceName": "composition",
        "min": 1,
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "Bundle.entry:composition.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "Composition",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Composition-uv-ips"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Bundle.entry:patient",
        "path": "Bundle.entry",
        "sliceName": "patient",
        "min": 1,
        "max": "1",
        "mustSupport": true
      },
      {
        "id": "Bundle.entry:patient.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "Patient",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Patient-uv-ips"
            ]
          }
        ],  
        "mustSupport": true
      },
      {
        "id": "Bundle.entry:AllergyIntolerance",
        "path": "Bundle.entry",
        "sliceName": "AllergyIntolerance",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Bundle.entry:AllergyIntolerance.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "AllergyIntolerance",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/AllergyIntolerance-uv-ips"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Bundle.entry:Condition",
        "path": "Bundle.entry",
        "sliceName": "Condition",
        "min": 1,
        "mustSupport": true
      },
      {
        "id": "Bundle.entry:Condition.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "Condition",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Condition-uv-ips"
            ]
          }
        ],
        "mustSupport": true
      },
      {
        "id": "Bundle.entry:Device",
        "path": "Bundle.entry",
        "sliceName": "Device"
      },
      {
        "id": "Bundle.entry:Device.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "Device",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Device-uv-ips",
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Device-observer-uv-ips"
            ]
          }
        ]
      },
      {
        "id": "Bundle.entry:DeviceUseStatement",
        "path": "Bundle.entry",
        "sliceName": "DeviceUseStatement"
      },
      {
        "id": "Bundle.entry:DeviceUseStatement.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "DeviceUseStatement",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/DeviceUseStatement-uv-ips"
            ]
          }
        ]
      },
      {
        "id": "Bundle.entry:DiagnosticReport",
        "path": "Bundle.entry",
        "sliceName": "DiagnosticReport"
      },
      {
        "id": "Bundle.entry:DiagnosticReport.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "DiagnosticReport",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/DiagnosticReport-uv-ips"
            ]
          }
        ]
      },
      {
        "id": "Bundle.entry:ImagingStudy",
        "path": "Bundle.entry",
        "sliceName": "ImagingStudy"
      },
      {
        "id": "Bundle.entry:ImagingStudy.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "ImagingStudy",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/ImagingStudy-uv-ips"
            ]
          }
        ]
      },
      {
        "id": "Bundle.entry:Immunization",
        "path": "Bundle.entry",
        "sliceName": "Immunization"
      },
      {
        "id": "Bundle.entry:Immunization.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "Immunization",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Immunization-uv-ips"
            ]
          }
        ]
      },
      {
        "id": "Bundle.entry:Media",
        "path": "Bundle.entry",
        "sliceName": "Media"
      },
      {
        "id": "Bundle.entry:Media.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "Media",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Media-observation-uv-ips"
            ]
          }
        ]
      },
      {
        "id": "Bundle.entry:Medication",
        "path": "Bundle.entry",
        "sliceName": "Medication"
      },
      {
        "id": "Bundle.entry:Medication.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "Medication",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Medication-uv-ips"
            ]    
          }
        ]
      },
      {
        "id": "Bundle.entry:MedicationRequest",
        "path": "Bundle.entry",
        "sliceName": "MedicationRequest"
      },
      {
        "id": "Bundle.entry:MedicationRequest.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "MedicationRequest",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/MedicationRequest-uv-ips"
            ] 
          }
        ]
      },
      {
        "id": "Bundle.entry:MedicationStatement",
        "path": "Bundle.entry",
        "sliceName": "MedicationStatement"
      },
      {
        "id": "Bundle.entry:MedicationStatement.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "MedicationStatement",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/MedicationStatement-uv-ips"
            ] 
          }
        ]
      },
      {
        "id": "Bundle.entry:Practitioner",
        "path": "Bundle.entry",
        "sliceName": "Practitioner"
      },
      {
        "id": "Bundle.entry:Practitioner.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "Practitioner",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Practitioner-uv-ips"
            ]
          }
        ]
      },
      {
        "id": "Bundle.entry:PractitionerRole",
        "path": "Bundle.entry",
        "sliceName": "PractitionerRole"
      },
      {
        "id": "Bundle.entry:PractitionerRole.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "PractitionerRole",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/PractitionerRole-uv-ips"
            ]
          }
        ]
      },
      {
        "id": "Bundle.entry:Procedure",
        "path": "Bundle.entry",
        "sliceName": "Procedure"
      },
      {
        "id": "Bundle.entry:Procedure.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "Procedure",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Procedure-uv-ips"
            ] 
          }
        ]
      },
      {
        "id": "Bundle.entry:Organization",
        "path": "Bundle.entry",
        "sliceName": "Organization"
      },
      {
        "id": "Bundle.entry:Organization.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "Organization",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Organization-uv-ips"
            ] 
          }
        ]
      },
      {
        "id": "Bundle.entry:Observation",
        "path": "Bundle.entry",
        "sliceName": "Observation"
      },
      {
        "id": "Bundle.entry:Observation.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "Observation", 
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-pregnancy-edd-uv-ips",
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-pregnancy-outcome-uv-ips",
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-pregnancy-status-uv-ips",
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-alcoholuse-uv-ips",
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-tobaccouse-uv-ips",
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-results-uv-ips",
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-results-laboratory-uv-ips",
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-results-pathology-uv-ips",
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Observation-results-radiology-uv-ips"
            ]
          }
        ]
      },
      {
        "id": "Bundle.entry:Specimen",
        "path": "Bundle.entry",
        "sliceName": "Specimen"
      },
      {
        "id": "Bundle.entry:Specimen.resource",
        "path": "Bundle.entry.resource",
        "min": 1,
        "type": [
          {
            "code": "Specimen",
            "profile": [
              "http://hl7.org/fhir/uv/ips/StructureDefinition/Specimen-uv-ips"
            ] 
          }
        ]
      }
    ]
  }
}
